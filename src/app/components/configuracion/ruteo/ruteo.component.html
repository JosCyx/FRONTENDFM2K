<app-menu></app-menu>

<div class="container">
  <h2 class="font-weight-bolt ruteo">RUTEO DE AREA</h2>

  <div class="">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <button class="btn btn-primary m-2" (click)="changeView('ingresar')">Ingresar</button>
          <button class="btn btn-primary m-2" (click)="changeView('consultar')">Consultar</button>
          <button class="btn btn-primary m-2" (click)="changeView('editar')">Editar</button>
        </div>
      </div>
    </nav>
  </div>

  <div class="formRol" *ngIf="changeview === 'ingresar'">
    <div>
      <div class="combos">
        <div class="form">
          <label class="form-label">Tipo de Solicitud</label>
          <select class="form-select" name="estado" [(ngModel)]="tipo_solicitud">
            <option selected>Seleccione el tipo de Solicitud</option>
            <option value="A">Cotizacion</option>
            <option value="I">Orden de Compra</option>
            <option value="I">Pago</option>
            <option value="I">Mariconada</option>
          </select>
        </div>

        <div class="form">
          <label class="form-label">Area:</label>
          <select class="form-select" name="estado" [(ngModel)]="area">
            <option selected>Seleccione la Area</option>
            <option value="A">Operaciones</option>
            <option value="I">Sistemas</option>
            <option value="A">Marketing</option>
            <option value="A">Compras</option>
            <option value="A">Contabilidad</option>
          </select>
        </div>

      </div>
      <table class="table table-bordered listaruteo">
        <thead>
          <tr>
            <th>Nivel 10</th>
            <th>Nivel 20</th>
            <th>Nivel 30</th>
            <th>Nivel 40</th>
            <th>Nivel 50</th>
            <th>Nivel 60</th>
            <th>Nivel 70</th>

          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let area of areas; let i = index">
            <tr *ngIf="currentPage === i / itemsPerPage">

              <td><input type="checkbox" [checked]="isNivelChecked(area, 1)" (change)="toggleNivel(area, 1)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 2)" (change)="toggleNivel(area, 2)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 3)" (change)="toggleNivel(area, 3)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 4)" (change)="toggleNivel(area, 4)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 5)" (change)="toggleNivel(area, 5)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 6)" (change)="toggleNivel(area, 6)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 7)" (change)="toggleNivel(area, 7)"></td>
            </tr>
          </ng-container>
        </tbody>
      </table>
      <div class="text-end">
        <button class="btn btn-primary" (click)="guardarNiveles()">Guardar</button>
      </div>
    </div>
  </div>

  <div class="formRol" *ngIf="changeview === 'consultar'">


    <div class="listaruteo">
      <table class="table table-bordered list">
        <thead>
          <tr>
            <th>Area</th>
            <th>Tipo de Solicitud</th>
            <ng-container *ngFor="let item of NivelesList$|async let i=index">
              <th>{{item.descRuteo}}</th>
            </ng-container>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of DepartamentoList$|async let i=index">
            <td>{{item.descDep}}</td>
            <ng-container *ngFor="let item of SolicotiList$|async let i=index">
              <td>{{item.tipoSolNombre}}</td>
            </ng-container>
          </tr>


        </tbody>
      </table>
    </div>



  </div>

  <div class="formRol" *ngIf="changeview === 'editar'">

    <div>
      <div class="combos">
        <div class="form">
          <label class="form-label">Tipo de Solicitud</label>
          <input class="form-control" type="text" name="estado" [(ngModel)]="tipo_solicitud" disabled>
          <!--<select class="form-select" name="estado" [(ngModel)]="tipo_solicitud">
              <option selected>Seleccione el tipo de Solicitud</option>
              <option value="A" disabled>Cotizacion</option>
              <option value="I">Orden de Compra</option>
              <option value="I">Pago</option>
              <option value="I">Mariconada</option>
            </select>-->
        </div>

        <div class="form">
          <label class="form-label">Area:</label>
          <input class="form-control" type="text" name="estado" [(ngModel)]="tipo_solicitud" disabled>
          <!--<select class="form-select" name="estado" [(ngModel)]="area">
              <option selected>Seleccione la Area</option>
              <option value="A">Operaciones</option>
              <option value="I">Sistemas</option>
              <option value="A">Marketing</option>
              <option value="A">Compras</option>
              <option value="A">Contabilidad</option>
            </select> -->
        </div>

      </div>
      <table class="table table-bordered listaruteo">
        <thead>
          <tr>
            <th>Nivel 10</th>
            <th>Nivel 20</th>
            <th>Nivel 30</th>
            <th>Nivel 40</th>
            <th>Nivel 50</th>
            <th>Nivel 60</th>
            <th>Nivel 70</th>

          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let area of areas; let i = index">
            <tr *ngIf="currentPage === i / itemsPerPage">

              <td><input type="checkbox" [checked]="isNivelChecked(area, 1)" (change)="toggleNivel(area, 1)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 2)" (change)="toggleNivel(area, 2)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 3)" (change)="toggleNivel(area, 3)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 4)" (change)="toggleNivel(area, 4)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 5)" (change)="toggleNivel(area, 5)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 6)" (change)="toggleNivel(area, 6)"></td>
              <td><input type="checkbox" [checked]="isNivelChecked(area, 7)" (change)="toggleNivel(area, 7)"></td>
            </tr>
          </ng-container>
        </tbody>
      </table>
      <div class="text-end">
        <button class="btn btn-primary" (click)="guardarNiveles()">Guardar</button>
      </div>
    </div>
  </div>


</div>